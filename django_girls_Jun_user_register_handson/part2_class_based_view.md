### Djangoã§ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ãƒãƒ³ã‚ºã‚ªãƒ³

- ãƒãƒ³ã‚ºã‚ªãƒ³ã®æº–å‚™ã‚’ã—ã‚ˆã†
- **ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†**
- ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†
- ãƒ¦ãƒ¼ã‚¶ç™»éŒ²æ©Ÿèƒ½ã‚’ä½œã£ã¦ã¿ã‚ˆã†

+++

### ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†

- ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã‚’ç´¹ä»‹ã—ã¾ã™
- è¨˜äº‹ã‚’ä½œæˆã™ã‚‹ãƒ“ãƒ¥ãƒ¼ï¼ˆ`post_new`ï¼‰ã‚’ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã«æ›¸ãæ›ãˆã¦ã¿ã¾ã™

---

### ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†

- **ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã®ç´¹ä»‹**
- ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã«æ›¸ãæ›ãˆ

+++

### ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã®å‰ã«

Django Girls Tutorialã§æ›¸ã„ã¦ã„ãŸã®ã¯ã€**é–¢æ•°** ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼

```python
# blog/views.pyã‹ã‚‰ä¸€éƒ¨æŠœç²‹
def post_new(request):
    # çœç•¥
```

>é–¢æ•°ã¯ def ã¨ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰ã¯ã˜ã¾ã‚Šã€ï¼ˆ[Pythonå…¥é–€](https://tutorial.djangogirls.org/ja/python_introduction/)ã‚ˆã‚Šï¼‰

+++

### ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼

- ã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã¨ã—ã¦ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ãæ–¹æ³•
- ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã‚’èº«ã«ã¤ã‘ã‚‹ã¨ã€Djangoã«ç”¨æ„ã•ã‚ŒãŸæ©Ÿèƒ½ã‚’æ´»ç”¨ã—ã‚„ã™ã„

+++

### ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼

```python
class PostNew(View):
    # çœç•¥
```

- `class`ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å®šç¾©ã—ã¦ã„ã‚‹ã“ã¨ã‚’è¡¨ã™
- `PostNew`ã¯ãƒ“ãƒ¥ãƒ¼ã®åå‰
- `(View)`ã¯PostNewãŒãƒ“ãƒ¥ãƒ¼ã§ã‚ã‚‹ã¨DjangoãŒåˆ†ã‹ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹

å‚è€ƒï¼š[Django ãƒ¢ãƒ‡ãƒ«](https://tutorial.djangogirls.org/ja/django_models/)

---

### ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†

- ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã®ç´¹ä»‹
- **ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã«æ›¸ãæ›ãˆ**

+++

### è¨˜äº‹ä½œæˆæ©Ÿèƒ½ã«é–¢ä¿‚ã™ã‚‹ã‚‚ã®ã‚’æ´—ã„å‡ºã™

- ãƒ¢ãƒ‡ãƒ«ï¼šPost
- URLè¨­å®šï¼›`path('post/new/', ..., name='post_new'),`
- ãƒ“ãƒ¥ãƒ¼ï¼š`post_new`
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼šblog/post_edit.html
  - ãƒ•ã‚©ãƒ¼ãƒ ï¼šPostForm

+++

### ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã¸ã®æ›¸ãæ›ãˆ

1. URLè¨­å®šã‚’å¤‰æ›´ï¼ˆã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ç”¨ã®æ›¸ãæ–¹ã«ã™ã‚‹ï¼‰
2. ãƒ“ãƒ¥ãƒ¼ã‚’ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã§æ›¸ã

ä»Šå›ã¯ã€ãƒ¢ãƒ‡ãƒ«ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€ãƒ•ã‚©ãƒ¼ãƒ ã«å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“

+++

### ã“ã“ã‹ã‚‰ãƒãƒ³ã‚ºã‚ªãƒ³æœ¬ç·¨ã§ã™

- ä¸€ç·’ã«æ‰‹ã‚’å‹•ã‹ã—ã¾ã—ã‚‡ã†ï¼ˆæ™‚é–“ã®é–¢ä¿‚ã§ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆã‚‚ä½¿ã„ã¾ã™ï¼‰
- Tutorialã«ãªã‚‰ã£ã¦ **ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã—ãªãŒã‚‰** é€²ã‚ã¾ã™

---

### ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã¸ã®æ›¸ãæ›ãˆ

1. **URLè¨­å®šã‚’å¤‰æ›´**ï¼ˆã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ç”¨ã®æ›¸ãæ–¹ã«ã™ã‚‹ï¼‰
2. ãƒ“ãƒ¥ãƒ¼ã‚’ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã§æ›¸ã

+++

### URLè¨­å®šå¤‰æ›´

`blog/urls.py`

```python
    # å¤‰æ›´å‰
    path('post/new/', views.post_new, name='post_new'),
    # å¤‰æ›´å¾Œ
    path('post/new/', views.PostNew.as_view(), name='post_new'),
```

[ã‚³ãƒ”ãƒ¼ãƒšãƒ¼ã‚¹ãƒˆç”¨ã‚¹ãƒ‹ãƒšãƒƒãƒˆ](https://github.com/ftnext/djangogirls-user-register/blob/master/handson_snippet.md#%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%99%E3%83%BC%E3%82%B9%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86)

+++

### å‹•ä½œç¢ºèªï¼šURLè¨­å®šå¤‰æ›´

ä¸€è¦§ç”»é¢ï¼šhttp://127.0.0.1:8000/ ã«ã‚¢ã‚¯ã‚»ã‚¹  
ï¼ˆã‚¹ãƒ©ã‚¤ãƒ‰ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼‰

+++

### ã‚¨ãƒ©ãƒ¼ç™ºç”ŸğŸ˜±

- ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ–ãƒ­ã‚°ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
- ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’è¦‹ã‚‹

>AttributeError: module 'blog.views' has no attribute 'PostNew'

+++

### ã‚¨ãƒ©ãƒ¼ã®åŸå› 

- ã‚¨ãƒ©ãƒ¼ã¯ã€blog/views.pyã«PostNewãŒãªã„ã¨è¨€ã£ã¦ã„ã‚‹
- ãŸã—ã‹ã«ã€ã¾ã ä½œæˆã—ã¦ã„ãªã„
- â†’è§£æ±ºç­–ï¼šblog/views.pyã«PostNewãƒ“ãƒ¥ãƒ¼ã‚’ä½œã‚Œã°ã‚ˆã„

---

### ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã¸ã®æ›¸ãæ›ãˆ

1. URLè¨­å®šã‚’å¤‰æ›´ï¼ˆã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ç”¨ã®æ›¸ãæ–¹ã«ã™ã‚‹ï¼‰
2. **ãƒ“ãƒ¥ãƒ¼ã‚’ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã§æ›¸ã**

ã¾ãšæœ€å°é™ã§ç°¡å˜ã«ä½œã‚Šã€å¾ã€…ã«æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™

+++

### ã¯ã˜ã‚ã¦ã®ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ï¼

`blog/views.py`

```python
from django.views import View  # è¿½åŠ 

class PostNew(View):
    pass
```

[ã‚³ãƒ”ãƒ¼ãƒšãƒ¼ã‚¹ãƒˆç”¨ã‚¹ãƒ‹ãƒšãƒƒãƒˆ](https://github.com/ftnext/djangogirls-user-register/blob/master/handson_snippet.md#%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%99%E3%83%BC%E3%82%B9%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86)


+++

### ã¯ã˜ã‚ã¦ã®ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ï¼

- ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã¯ã€`class PostNew(View):`ã¨ã„ã†æ›¸ãæ–¹
  - ç™ºå±•çš„ãªå†…å®¹ï¼šViewã‚’ã€Œç¶™æ‰¿ã€ã—ãŸã‚¯ãƒ©ã‚¹ã‚’ä½œã£ã¦ã„ã¾ã™
- `pass`ã«ã‚ˆã‚Šã€ç¾åœ¨ã®PostNewãƒ“ãƒ¥ãƒ¼ã¯ä½•ã‚‚ã—ãªã„ãƒ“ãƒ¥ãƒ¼

+++

### ä¸€è¦§ç”»é¢ å‹•ä½œç¢ºèª

http://127.0.0.1:8000/

- æ›¸ãæ–¹ã«å•é¡Œã¯ãªã„ã®ã§ã€å…ˆã»ã©ã®ã‚¨ãƒ©ãƒ¼ã¯è§£æ±º
- ä¸€è¦§ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹

+++

### è¨˜äº‹ä½œæˆ å‹•ä½œç¢ºèª

+ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨çœŸã£ç™½ãªç”»é¢ã«

![](django_girls_Jun_user_register_handson/assets/part2/1_no_post_new_form.png)

---

### è¨˜äº‹ä½œæˆ ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º

- çœŸã£ç™½ãªç”»é¢ã«å¯¾å‡¦ã—ã¦ã€è¨˜äº‹ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ç”»é¢ï¼ˆãƒ•ã‚©ãƒ¼ãƒ ï¼‰ã‚’è¡¨ç¤ºã—ãŸã„
- ï¼ˆãƒ•ã‚©ãƒ¼ãƒ ã®æ©Ÿèƒ½ã¯ã„ã£ãŸã‚“ã¯å¾Œå›ã—ã€‚ä¿å­˜ã§ããªãã¦ã‚‚ã‚ˆã—ã¨ã™ã‚‹ï¼‰

+++

### ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã«ã¤ã„ã¦ã‚‚ã†å°‘ã— 1/2

- Webã‚¢ãƒ—ãƒªã«ãŠã‘ã‚‹ã€Œãƒ“ãƒ¥ãƒ¼ã€ã‚’ **ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£** ã¨ **ãƒ¡ã‚½ãƒƒãƒ‰** ã‚’ã‚‚ã¤ã‚³ãƒ¼ãƒ‰ã§è¡¨ç¾
- ã“ã‚ŒãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ãã¨ã„ã†ã“ã¨ã§ã™

å‚è€ƒï¼š[Django ãƒ¢ãƒ‡ãƒ«](https://tutorial.djangogirls.org/ja/django_models/)

+++

### ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã«ã¤ã„ã¦ã‚‚ã†å°‘ã— 2/2

- ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼šçŠ¶æ…‹ï¼ˆãƒ“ãƒ¥ãƒ¼ã®å‡¦ç†ã§å‚ç…§ã•ã‚Œã‚‹è¨­å®šæƒ…å ±ï¼‰
- ãƒ¡ã‚½ãƒƒãƒ‰ï¼šå‘½ä»¤ï¼ˆãƒ“ãƒ¥ãƒ¼ã§è¡Œã‚ã‚Œã‚‹å‡¦ç†ï¼‰

å‚è€ƒï¼š[Django ãƒ¢ãƒ‡ãƒ«](https://tutorial.djangogirls.org/ja/django_models/)

+++

### è¨˜äº‹ä½œæˆ ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º 1/2

ã‚¯ãƒ©ã‚¹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹ï¼ˆ[ã‚³ãƒ”ãƒ¼ãƒšãƒ¼ã‚¹ãƒˆç”¨ã‚¹ãƒ‹ãƒšãƒƒãƒˆ](https://github.com/ftnext/djangogirls-user-register/blob/master/handson_snippet.md#%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%99%E3%83%BC%E3%82%B9%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86)
ï¼‰

```python
class PostNew(View):
    # passã¨ã—ã¦ã„ãŸéƒ¨åˆ†ã‚’æ›¸ãæ›ãˆã‚‹
    form_class = PostForm
    template_name = 'blog/post_edit.html'
```

ã¾ã çœŸã£ç™½ãªç”»é¢ã§ã™

+++

### è¨˜äº‹ä½œæˆ ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º 2/2

ã‚¯ãƒ©ã‚¹ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ï¼ˆ[ã‚³ãƒ”ãƒ¼ãƒšãƒ¼ã‚¹ãƒˆç”¨ã‚¹ãƒ‹ãƒšãƒƒãƒˆ](https://github.com/ftnext/djangogirls-user-register/blob/master/handson_snippet.md#%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%99%E3%83%BC%E3%82%B9%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86)
ï¼‰

```python
class PostNew(View):
    form_class = PostForm
    template_name = 'blog/post_edit.html'

    # ä»¥ä¸‹ã‚’è¿½åŠ ï¼ˆform_class, template_nameã¨å§‹ã¾ã‚Šã®ä½ç½®ã‚’æƒãˆã¦ãã ã•ã„ï¼‰
    def get(self, request, *args, **kwargs):
        form = self.form_class()
        return render(request, self.template_name, {'form': form})
```

+++

### ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º å‹•ä½œç¢ºèª

- ä¸€è¦§ç”»é¢ http://127.0.0.1:8000/ ã«ã‚¢ã‚¯ã‚»ã‚¹
- +ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆã‚„ã‚Šã¾ã—ãŸï¼ï¼‰

+++

### ãƒ•ã‚©ãƒ¼ãƒ ã®ä¿å­˜ã‚’è©¦ã¿ã‚‹

- æ®‹å¿µãªãŒã‚‰ä¿å­˜ã§ãã¾ã›ã‚“ï¼ˆçœŸã£ç™½ãªç”»é¢å†ã³ï¼‰
- ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤ºã¨ã„ã†ç›®æ¨™ã¯æœãŸã—ãŸã®ã§ã€æ¬¡ã¯ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰è¨˜äº‹ã‚’ä¿å­˜ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™

+++?color=#ffdba8

### ç™ºå±•å†…å®¹ï¼šHTTPãƒ¡ã‚½ãƒƒãƒ‰

Webã‚¢ãƒ—ãƒªã¸ã®ãƒ‡ãƒ¼ã‚¿ã®é€ã‚Šæ–¹ã¯2é€šã‚Šã‚ã‚‹

- GET
- POST

URLã«å¯¾ã—ã¦GETã¾ãŸã¯POSTã§ãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚‹

+++?color=#ffdba8

### ç™ºå±•å†…å®¹ï¼š`get`

- GETãƒ¡ã‚½ãƒƒãƒ‰ã§URLãŒå‘¼ã³å‡ºã•ã‚ŒãŸéš›ã®å‡¦ç†ã«å¯¾å¿œ
- URLã®ãƒšãƒ¼ã‚¸ã‚’ **ãƒ–ãƒ©ã‚¦ã‚¶ã§å˜ã«è¡¨ç¤º** ã™ã‚‹éš›ã‚‚GETãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†
- GETãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚‹ã¨ã€URLã«å«ã¾ã‚Œã‚‹

+++?color=#ffdba8

### è§£èª¬ï¼šå®Ÿã¯è¨­å®šå†…å®¹ã¯ã“ã‚Œã¾ã§ã¨åŒã˜

```python
# Tutorialã®æ›¸ãæ–¹ï¼ˆé–¢æ•°ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã¨å‘¼ã°ã‚Œã‚‹ï¼‰
def post_new(request):
    if request.method == "POST":
        # çœç•¥
    else:
        form = PostForm()
    return render(request, 'blog/post_edit.html', {'form': form})

# ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼
def get(self, request, *args, **kwargs):
    form = self.form_class()  # form = PostForm()ã¨åŒã˜
    # render(request, 'blog/post_edit.html', {'form': form}) ã¨åŒã˜
    return render(request, self.template_name, {'form': form})
```

---

### è¨˜äº‹ä½œæˆ 1/2

ã‚¯ãƒ©ã‚¹ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ï¼ˆ[ã‚³ãƒ”ãƒ¼ãƒšãƒ¼ã‚¹ãƒˆç”¨ã‚¹ãƒ‹ãƒšãƒƒãƒˆ](https://github.com/ftnext/djangogirls-user-register/blob/master/handson_snippet.md#%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%99%E3%83%BC%E3%82%B9%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86)
ï¼‰

```python
class PostNew(View):
    form_class = PostForm
    template_name = 'blog/post_edit.html'

    # getã¯å¤‰æ›´ãŒãªã„ã®ã§çœç•¥

    # ä»¥ä¸‹ã‚’è¿½åŠ ï¼ˆform_class, template_name, getã¨å§‹ã¾ã‚Šã®ä½ç½®ã‚’æƒãˆã¦ãã ã•ã„ï¼‰
    def post(self, request, *args, **kwargs):
        form = self.form_class(request.POST)
        # ã“ã®ã‚ã¨è¿½åŠ ã—ã¾ã™
        return render(request, self.template_name, {'form': form})
```

+++

### è¨˜äº‹ä½œæˆ 2/2

[ã‚³ãƒ”ãƒ¼ãƒšãƒ¼ã‚¹ãƒˆç”¨ã‚¹ãƒ‹ãƒšãƒƒãƒˆ](https://github.com/ftnext/djangogirls-user-register/blob/master/handson_snippet.md#%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%99%E3%83%BC%E3%82%B9%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86)


```python
    def post(self, request, *args, **kwargs):
        form = self.form_class(request.POST)
        # è¿½åŠ éƒ¨åˆ†å§‹ã¾ã‚Šï¼ˆã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆæ¨å¥¨ï¼‰
        if form.is_valid():
            post = form.save(commit=False)
            post.author = request.user
            post.published_date = timezone.now()
            post.save()
            return redirect('post_list')
        # è¿½åŠ éƒ¨åˆ†çµ‚ã‚ã‚Š
        return render(request, self.template_name, {'form': form})
```

+++

### å‹•ä½œç¢ºèª

- ä¸€è¦§ç”»é¢ http://127.0.0.1:8000/
- ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ä¿å­˜ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ

+++?color=#ffdba8

### ç™ºå±•å†…å®¹ï¼š`post`

- POSTãƒ¡ã‚½ãƒƒãƒ‰ã§URLãŒå‘¼ã³å‡ºã•ã‚ŒãŸéš›ã®å‡¦ç†ã«å¯¾å¿œ
- URLã«å«ã‚ãšã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚‹æ–¹æ³•
- ãƒ¡ãƒªãƒƒãƒˆã®1ã¤ï¼šé•·ã„ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ–ãƒ­ã‚°ã®è¨˜äº‹ãªã©ï¼‰ã‚’é€ä¿¡ã§ãã‚‹

+++?color=#ffdba8

### è§£èª¬ï¼šå®Ÿã¯è¨­å®šå†…å®¹ã¯ã“ã‚Œã¾ã§ã¨åŒã˜

`if form.is_valid()`ï¼ˆãƒ•ã‚©ãƒ¼ãƒ ã®å…¥åŠ›å†…å®¹ã«å•é¡ŒãŒãªã„å ´åˆï¼‰ã®å‡¦ç†ã¯å…¨ãåŒã˜ãªã®ã§çœç•¥

```python
# é–¢æ•°ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼
def post_new(request):
    if request.method == "POST":
        form = PostForm(request.POST)
        # çœç•¥
    else:
        # çœç•¥
    return render(request, 'blog/post_edit.html', {'form': form})

# ã‚¯ãƒ©ã‚¹ã®ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼
def post(self, request, *args, **kwargs):
    # form = PostForm(request.POST)ã¨åŒã˜
    form = self.form_class(request.POST)
    # çœç•¥
    return render(request, self.template_name, {'form': form})
```

---

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾å¿œ

- æ›¸ãæ›ãˆã®æœ€å¾Œã®1ã‚¹ãƒ†ãƒƒãƒ—ãŒæ®‹ã£ã¦ã„ã¾ã™
- å®Ÿã¯ã€ä»Šã®ã¾ã¾ã§ã¯ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ãªã„ãƒ¦ãƒ¼ã‚¶ã‚‚è¨˜äº‹ä½œæˆç”»é¢ãŒè¦‹ãˆã¡ã‚ƒã„ã¾ã™
- ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¦ã‹ã‚‰ http://127.0.0.1:8000/post/new/ ã«ã‚¢ã‚¯ã‚»ã‚¹

+++

### è¨˜äº‹ã®ä½œæˆã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã¨ã™ã‚‹

```python
from django.contrib.auth.mixins import LoginRequiredMixin  # è¿½åŠ 

class PostNew(LoginRequiredMixin, View):
    # ã“ã®ä¸‹ã«å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“
```

[ã‚³ãƒ”ãƒ¼ãƒšãƒ¼ã‚¹ãƒˆç”¨ã‚¹ãƒ‹ãƒšãƒƒãƒˆ](https://github.com/ftnext/djangogirls-user-register/blob/master/handson_snippet.md#%E3%82%AF%E3%83%A9%E3%82%B9%E3%83%99%E3%83%BC%E3%82%B9%E3%83%93%E3%83%A5%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86)

+++

### è¨˜äº‹ã®ä½œæˆã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã¨ã™ã‚‹

- ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸãƒ¦ãƒ¼ã‚¶ã®ã¿è¨˜äº‹ä½œæˆç”»é¢ãŒè¦‹ãˆã‚‹ã‚ˆã†ã«ã—ãŸ
- ç™ºå±•èª¬æ˜ï¼šExtensionsã«ã‚ã‚‹`@login_required`ã®ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ç‰ˆ

+++

### å‹•ä½œç¢ºèª

ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¦ http://127.0.0.1:8000/post/new/ ã«ã‚¢ã‚¯ã‚»ã‚¹

![è¨˜äº‹ä½œæˆç”»é¢ã®è¡¨ç¤ºã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™](django_girls_Jun_user_register_handson/assets/part2/2_required_login.png)

---

### å°ã¾ã¨ã‚ï¼šã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼

- urls.pyã‚‚å¤‰æ›´ãŒå¿…è¦(`as_view()`)
- `class PostNew(View):`
- `get`, `post`ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨æ„ã—ã¾ã—ã‚‡ã†
